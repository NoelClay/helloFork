#loader(
  x-show='loading'
  x-transition:enter='transition ease-out duration-1000'
  x-transition:enter-start='opacity-100'
  x-transition:enter-end='opacity-100'
  x-transition:leave='transition ease-in duration-1000'
  x-transition:leave-start='opacity-100'
  x-transition:leave-end='opacity-0'
  :class="{ 'dark-loader': $data.dark }"
  class='w-screen h-screen fixed top-0 left-0 z-[10000] flex flex-col items-center justify-center')
  
  .loading-container(
    class='relative flex flex-col items-center justify-center'
  )
    //- 회전하는 이모지 링
    .emoji-ring
      each emoji in ['🌟']
        .emoji(class='absolute')= emoji
    
    //- 중앙 텍스트
    .loading-text(
      class='text-white font-bold text-4xl animate-bounce mt-8 text-center'
    ) 
      span(class='animate-rainbow') Happy
      br
      span(class='animate-rainbow delay-300') Day 🚀

    //- 파티클 효과
    .particles
      - for (let i = 0; i < 100; i++)
        .particle

style.
  /* 다크모드 */
  #loader.dark-loader {
    background-color: rgb(41, 42, 45) !important;
  }
  /* 라이트 모드 */
  #loader {
    background-color: rgb(244, 244, 246) !important;
  }

  .emoji-ring {
    position: relative;
    width: 250px;
    height: 250px;
    animation: ring-spin 4s linear infinite;
  }

  .emoji {
    font-size: 2rem;
    transform-origin: 75px 75px;
    animation: self-spin 4s linear infinite;
  }

  @for $i from 1 through 8 {
    .emoji:nth-child($i) {
      transform: rotate($i * 45deg) translateX(60px);
      animation-delay: -($i * 0.5s);
    }
  }

  @keyframes ring-spin {
    100% { transform: rotate(360deg); }
  }

  @keyframes self-spin {
    100% { transform: rotate(360deg) translateX(60px); }
  }

  .animate-rainbow {
    background: linear-gradient(
      to right, 
      #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #8f00ff
    );
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    animation: rainbow 4s linear infinite;
    display: inline-block;
  }

  @keyframes rainbow {
    0% { filter: hue-rotate(0deg); }
    100% { filter: hue-rotate(360deg); }
  }

  .particle {
    position: absolute;
    width: 5px;
    height: 5px;
    background: white;
    border-radius: 50%;
    pointer-events: none;
  }

  @for $i from 1 through 50 {
    .particle:nth-child($i) {
      $size: random(5) + px;
      width: $size;
      height: $size;
      animation: 
        particle-fall-#{$i} random(5) + s linear infinite,
        particle-fade random(3) + s ease-in infinite;
      left: random(100) + vw;
      animation-delay: -(random(5)) + s;
    }

    @keyframes particle-fall-#{$i} {
      0% {
        transform: translateY(-100vh) rotate(0deg);
      }
      100% {
        transform: translateY(100vh) rotate(random(360) + deg);
      }
    }
  }

  @keyframes particle-fade {
    0%, 100% { opacity: 0; }
    50% { opacity: 1; }
  }

  .delay-300 {
    animation-delay: 300ms;
  }

  /* 추가 반짝이 효과 */
  .loading-container::before,
  .loading-container::after {
    content: '';
    position: absolute;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, transparent 60%);
    animation: sparkle 4s ease-in-out infinite;
  }

  .loading-container::after {
    animation-delay: -2s;
  }

  @keyframes sparkle {
    0%, 100% { transform: scale(0.5) rotate(0deg); opacity: 0; }
    50% { transform: scale(1.2) rotate(180deg); opacity: 0.3; }
  }
